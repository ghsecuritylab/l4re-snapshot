<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>L4Re - L4 Runtime Environment: DMA Space Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="l4re.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">L4Re - L4 Runtime Environment
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__api__l4re__c__dma.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DMA Space Interface<div class="ingroups"><a class="el" href="group__api__l4re__c.html">L4Re C Interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>DMA Space C interface.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for DMA Space Interface:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__api__l4re__c__dma.png" border="0" alt="" usemap="#group____api____l4re____c____dma"/>
<map name="group____api____l4re____c____dma" id="group____api____l4re____c____dma">
<area shape="rect" id="node1" href="group__api__l4re__c.html" title="Documentation for the L4Re C Interface. " alt="" coords="5,5,136,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga0a28e1f39a38aab07a01706ebd22e432"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__l4__cap__api.html#ga1445e923ce73029130d569d6e69a4dd8">l4_cap_idx_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__l4re__c__dma.html#ga0a28e1f39a38aab07a01706ebd22e432">l4re_dma_space_t</a></td></tr>
<tr class="memdesc:ga0a28e1f39a38aab07a01706ebd22e432"><td class="mdescLeft">&#160;</td><td class="mdescRight">DMA space capability type.  <a href="#ga0a28e1f39a38aab07a01706ebd22e432">More...</a><br /></td></tr>
<tr class="separator:ga0a28e1f39a38aab07a01706ebd22e432"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab9a10d39031de4b153c26317a295ffba"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__l4re__c__dma.html#gab9a10d39031de4b153c26317a295ffba">l4re_dma_space_map</a> (<a class="el" href="group__api__l4re__c__dma.html#ga0a28e1f39a38aab07a01706ebd22e432">l4re_dma_space_t</a> dma, <a class="el" href="group__api__l4re__c__ds.html#ga067feec0fd93ee6feb4b212d92b7ba8a">l4re_ds_t</a> src, <a class="el" href="group__l4__basic__types.html#ga4087b991c40c0d2fcde9ca331049a4d4">l4_addr_t</a> offset, <a class="el" href="group__l4__basic__types.html#ga08c1e83a068ded7add134b188cd44967">l4_size_t</a> *size, unsigned long attrs, enum l4re_dma_space_direction dir, l4re_dma_space_dma_addr_t *dma_addr) <a class="el" href="group__l4sys__defines.html#ga362dfa378e662dd04f710a23fc7ea931">L4_NOTHROW</a></td></tr>
<tr class="memdesc:gab9a10d39031de4b153c26317a295ffba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map the given part of this data space into the DMA address space.  <a href="#gab9a10d39031de4b153c26317a295ffba">More...</a><br /></td></tr>
<tr class="separator:gab9a10d39031de4b153c26317a295ffba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07ceb9a3b19a1a6cedf5b7a742df4abb"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__api__l4re__c__dma.html#ga07ceb9a3b19a1a6cedf5b7a742df4abb">l4re_dma_space_unmap</a> (<a class="el" href="group__api__l4re__c__dma.html#ga0a28e1f39a38aab07a01706ebd22e432">l4re_dma_space_t</a> dma, l4re_dma_space_dma_addr_t dma_addr, <a class="el" href="group__l4__basic__types.html#ga08c1e83a068ded7add134b188cd44967">l4_size_t</a> size, unsigned long attrs, enum l4re_dma_space_direction dir) <a class="el" href="group__l4sys__defines.html#ga362dfa378e662dd04f710a23fc7ea931">L4_NOTHROW</a></td></tr>
<tr class="memdesc:ga07ceb9a3b19a1a6cedf5b7a742df4abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmap the given part of this data space from the DMA address space.  <a href="#ga07ceb9a3b19a1a6cedf5b7a742df4abb">More...</a><br /></td></tr>
<tr class="separator:ga07ceb9a3b19a1a6cedf5b7a742df4abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>DMA Space C interface. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga0a28e1f39a38aab07a01706ebd22e432"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group__l4__cap__api.html#ga1445e923ce73029130d569d6e69a4dd8">l4_cap_idx_t</a> <a class="el" href="group__api__l4re__c__dma.html#ga0a28e1f39a38aab07a01706ebd22e432">l4re_dma_space_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DMA space capability type. </p>
<p>DMA Address Space. A Dma_space represents the DMA address space of a device. Whenever a device needs direct access to parts of an <a class="el" href="classL4Re_1_1Dataspace.html" title="Interface for memory-like objects. ">L4Re::Dataspace</a>, that part of the data space must be mapped to the DMA address space that is assigned to that device. After the DMA accesses to the memory are finished the memory must be unmapped from the device's DMA address space.</p>
<p>Mapping to a DMA address space, using map(), makes the given parts of the data space visible to the associated device at the returned DMA address. As long as the memory is mapped into a DMA space it is 'pinned' and cannot be subject to dynamic memory management such as swapping. Additionally, map() is responsible for the necessary syncing operations before the DMA.</p>
<p>unmap() is the reverse operation to map() and unmaps the given data-space part for the DMA address space. unmap() is responsible for the necessary sync operations after the DMA. </p>

<p>Definition at line <a class="el" href="dma__space_8h_source.html#l00050">50</a> of file <a class="el" href="dma__space_8h_source.html">dma_space.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gab9a10d39031de4b153c26317a295ffba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long l4re_dma_space_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__api__l4re__c__dma.html#ga0a28e1f39a38aab07a01706ebd22e432">l4re_dma_space_t</a>&#160;</td>
          <td class="paramname"><em>dma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__api__l4re__c__ds.html#ga067feec0fd93ee6feb4b212d92b7ba8a">l4re_ds_t</a>&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga4087b991c40c0d2fcde9ca331049a4d4">l4_addr_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga08c1e83a068ded7add134b188cd44967">l4_size_t</a> *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>attrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum l4re_dma_space_direction&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">l4re_dma_space_dma_addr_t *&#160;</td>
          <td class="paramname"><em>dma_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map the given part of this data space into the DMA address space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dma</td><td>DMA space capability </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>requires capability rights: {R} </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>Source data space (that describes the memory). Caller needs write rights to the data space. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>The offset (bytes) with in <code>src</code>. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">size</td><td>The size (bytes) of the of the region to be mapped to for DMA, after successful mapping the size returned is the size mapped for DMA as single block, this size might be smaller than the original input size, in this case the caller might call map() again with a new offset and the remaining size. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrs</td><td>The attributes used for this DMA mapping (a combination of Dma_space::Attribute values). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dir</td><td>The direction of the DMA transfer issued with this mapping. The same value must later be passed to unmap(). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dma_addr</td><td>The DMA address to use for DMA with the associated device.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 in the case of success, a negative error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga07ceb9a3b19a1a6cedf5b7a742df4abb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long l4re_dma_space_unmap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__api__l4re__c__dma.html#ga0a28e1f39a38aab07a01706ebd22e432">l4re_dma_space_t</a>&#160;</td>
          <td class="paramname"><em>dma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">l4re_dma_space_dma_addr_t&#160;</td>
          <td class="paramname"><em>dma_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga08c1e83a068ded7add134b188cd44967">l4_size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>attrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum l4re_dma_space_direction&#160;</td>
          <td class="paramname"><em>dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unmap the given part of this data space from the DMA address space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dma</td><td>DMA space capability </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>requires capability rights: {R} </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dma_addr</td><td>The DMA address (returned by Dma_space::map()). </td></tr>
    <tr><td class="paramname">size</td><td>The size (bytes) of the memory region to unmap. </td></tr>
    <tr><td class="paramname">attrs</td><td>The attributes for the unmap (currently none). </td></tr>
    <tr><td class="paramname">dir</td><td>The direction of the finished DMA operation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Dec 30 2015 23:22:18 for L4Re - L4 Runtime Environment by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
